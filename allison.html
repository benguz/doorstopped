
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 
    - primary meta tag
  -->
  <title>Your Analytics | Doorstop Education</title>
  <meta name="title" content="Your Analytics | Doorstop Education">
  <meta name="description" content="See data-driven analysis on how your students interact with Doorstops. Customize and create doorstops for your students.">

  <!-- 
    - favicon
  -->
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

  <!-- 
    - custom css link
      -->

  <link rel="stylesheet" href="/assets/css/style.css">

  <!-- 
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;500;600;700;800&family=Poppins:wght@400;500&display=swap"
    rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@2.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

  <style>
    body {
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 130vh;
        background: #F0DDF0;
        font-family: Poppins;
    }

    

    .box, .new-elements .square, .new-elements .rectangle {
            border-radius: 10px;
            background: #FFF;
            box-shadow: 2px 5px 5px 1px rgba(0, 0, 0, 0.25);
            padding: 10px;
            margin: 20px;
            text-align: left;
        }

    .square {
      position: relative;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      overflow: auto;
    }

    .box {  
        max-width: 90%;
        width: 650px;
        position: absolute;
        top: 200px;
        padding: 30px;
    }

    .button {
            border-radius: 10px;
            position: absolute;
            right: 10px;
            bottom: 10px;
            padding: 10px 20px;
            background: #ccc;
            color: #000000;
            border: none;
            cursor: pointer;
        }

        .new-elements {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            max-width: 90%;
            width: 100%;
            flex-basis: auto;
        }

        .new-elements .square {
            width: calc((100% / 3) - 40px);
            min-width: 150px;
            height: 250px;
        }

        .new-elements .rectangle {
            width: calc(100% - 40px);
            min-height: 300px;
        }

        .fade-in {
        animation: fadeIn .3s ease-in forwards;
        }

        .fade-out {
        animation: fadeOut .4s ease-out forwards;
        }


        .wrapper {
        display: flex;
        }

        nav {
        width: 16.67%; /* 1/6th of the width */
        background: #333;
        color: #fff;
        padding: 20px;
        box-sizing: border-box;
        }

        .main {
        flex-grow: 1;
        background: #E6EDFD;
        min-height: 100vh;
        box-sizing: border-box;
        padding: 20px;
        display: flex;
        flex-wrap: wrap;
        align-items: stretch;
        justify-content: space-around;
        }
        .row {
            display: flex;
            flex-direction: row;
            flex-grow: 1;
            flex-basis: auto;
        }

        .col {
            display: flex;
            flex-direction: column;
        }

        .number {
          font-size: 5em;
          font-weight: bold;
      }

.icon {
    position: absolute;
    top: 20px;
    right: -60px;
    display: flex;
    max-height: 40px;
}

.icon img {
    width: 30px;
    height: 30px;
}

.icon img.positive {
  color: green;
}

.icon img.negative {
    color: red;
}
.top-section {
    position: relative;
    display: flex;
    flex-direction: row;
    justify-content: right;
}

.percentage {
    margin-left: 5px;
    font-size: 1em;
    align-self: flex-start;
}

.percentage.positive {
    color: green;
}

.percentage.negative {
    color: red;
}

.label {
    font-size: 1.3em;
    font-weight: bold;
    text-align: center;
}

.header-spacer {
    height: 15em;
    width: 100%;
}

@keyframes fadeIn {
    0% {opacity: 0;}
    100% {opacity: 1;}
}

@keyframes fadeOut {
    0% {opacity: 1;}
    100% {opacity: 0;}
}

canvas {
  width: 100%;
  min-height: 200px;
}

#intro-img {
  width: 150px;
  height: 150px;
}

    @media (max-width: 720px) {
        body {
          height: 170vh;
          align-items: flex-start;
        }
        .box {
            max-width: 85%;
            margin: auto;
        }
        .new-elements {
            flex-direction: column;
        }
        .row {
            flex-direction: column;
        }
        .new-elements .square {
            width: 90%;
        }
        .header-spacer {
            height: 2.5em;
        }
    }

    #emoji-bar {
  display: flex;
  justify-content: space-around;
  align-items: flex-end;
  height: 200px;
  background-color: transparent;
}

.emoji-container {
  height: 100%;
  display: flex;
  align-items: flex-end;
  position: relative;
}

.emoji-button-container {
  background-color: #c9c9c9; /* Apply background color to emoji bar only */
  padding: 20px;
  border-radius: 0px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.left {
    border-radius: 20px 0px 0px 20px;
}

.right {
    border-radius: 0px 20px 20px 0px;
}


.emoji-button {
  background: none;
  border: none;
  font-size: 2em;
  cursor: pointer;
}

.floating-emoji {
  position: absolute;
  bottom: 50px;
  opacity: 1;
}

@keyframes floatPath1 {
  0% { transform: translate(0, 0); opacity: 1; }
  25% { transform: translate(-20px, -30px); opacity: 0.75; }
  50% { transform: translate(20px, -60px); opacity: 0.5; }
  75% { transform: translate(-20px, -90px); opacity: 0.25; }
  100% { transform: translate(20px, -120px); opacity: 0; }
}

@keyframes floatPath2 {
  0% { transform: translate(0, 0); opacity: 1; }
  12.5% {transform: translate(6px, -15px); opacity: 0.875;}
  25% { transform: translate(8px, -30px); opacity: 0.75; }
  37.5% {transform: translate(-2px, -45px); opacity: 0.625;}
  50% { transform: translate(-8px, -60px); opacity: 0.5; }
  62.5% {transform: translate(-6px, -75px); opacity: 0.375;}
  75% { transform: translate(0px, -90px); opacity: 0.25; }
  87.5% {transform: translate(-5px, -105px); opacity: 0.125;}
  100% { transform: translate(-10px, -120px); opacity: 0; }
}

@keyframes floatPath3 {
    0% { transform: translate(0, 0); opacity: 1; }
  12.5% {transform: translate(5px, -15px); opacity: 0.875;}
  25% { transform: translate(10px, -30px); opacity: 0.75; }
  37.5% {transform: translate(1px, -45px); opacity: 0.625;}
  50% { transform: translate(-7px, -60px); opacity: 0.5; }
  62.5% {transform: translate(-10px, -75px); opacity: 0.375;}
  75% { transform: translate(-7px, -90px); opacity: 0.25; }
  87.5% {transform: translate(-5px, -105px); opacity: 0.125;}
  100% { transform: translate(-10px, -120px); opacity: 0; }

}

@keyframes floatPath4 {
    0% { transform: translate(0, 0); opacity: 1; }
  12.5% {transform: translate(-6px, -15px); opacity: 0.875;}
  25% { transform: translate(-8px, -30px); opacity: 0.75; }
  37.5% {transform: translate(2px, -45px); opacity: 0.625;}
  50% { transform: translate(8px, -60px); opacity: 0.5; }
  62.5% {transform: translate(6px, -75px); opacity: 0.375;}
  75% { transform: translate(3px, -90px); opacity: 0.25; }
  87.5% {transform: translate(-5px, -105px); opacity: 0.125;}
  100% { transform: translate(-10px, -120px); opacity: 0; }
}

@keyframes floatPath5 {
  0% { transform: translate(0, 0); opacity: 1; }
  25% { transform: translate(20px, -30px); opacity: 0.75; }
  50% { transform: translate(20px, -60px); opacity: 0.5; }
  75% { transform: translate(-20px, -90px); opacity: 0.25; }
  100% { transform: translate(-20px, -120px); opacity: 0; }
}

@keyframes floatPath6 {
  0% { transform: translate(0, 0); opacity: 1; }
  25% { transform: translate(-20px, -30px); opacity: 0.75; }
  50% { transform: translate(-20px, -60px); opacity: 0.5; }
  75% { transform: translate(20px, -90px); opacity: 0.25; }
  100% { transform: translate(20px, -120px); opacity: 0; }
}

@media screen and (max-width: 720px) {
    
.emoji-button-container {
  padding: 15px;

}

.left {
    border-radius: 15px 0px 0px 15px;
}

.right {
    border-radius: 0px 15px 15px 0px;
}

body {
    height: 500vh;
}
.emoji-button {
  font-size: 1.5em;
}
 p {
    text-align: center;
 }
}
</style><link rel="stylesheet" href="/doorstops/food.css">
<script defer data-domain="doorstopped.org" src="https://plausible.io/js/script.js"></script>
<script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
</head>
<body>
    <header class="header" data-header>
        <div class="container">
    
          <a href="/index.html" class="logo">
            <img src="/assets/images/doors.svg" width="162" height="50" alt="Doorstopped logo">
          </a>
    
          <nav class="navbar" data-navbar>
    
            <div class="wrapper">
              <a href="/index.html" class="logo">
                <img src="/assets/images/doors.svg" width="162" height="50" alt="EduWeb logo">
              </a>
    
              <button class="nav-close-btn" aria-label="close menu" data-nav-toggler>
                <ion-icon name="close-outline" aria-hidden="true"></ion-icon>
              </button>
            </div>
    
            <ul class="navbar-list">
    
              <li class="navbar-item">
                <a href="/analytics/index" class="navbar-link" style="color: black" data-nav-link>Metrics</a>
              </li>
    
              <li class="navbar-item">
                <a href="/analytics/sentiment" class="navbar-link"  style="color: black" data-nav-link>Sentiment</a>
              </li>
    
              <li class="navbar-item">
                <a href="/analytics/design" class="navbar-link" style="color: black" data-nav-link>Create</a>
              </li>
    
              <li class="navbar-item">
                <a href="#download" class="navbar-link" style="color: black" data-nav-link>Download</a>
              </li>
    
            </ul>
    
          </nav>
    
          <div class="header-actions">
    
            <a href="mailto:guzovsky@princeton.edu" class="btn has-before">
              <span class="span">Contact Support</span>
    
              <ion-icon name="arrow-forward-outline" aria-hidden="true"></ion-icon>
            </a>
    
            <button class="header-action-btn" aria-label="open menu" data-nav-toggler>
              <ion-icon name="menu-outline" aria-hidden="true"></ion-icon>
            </button>
    
          </div>
    
          <div class="overlay" data-nav-toggler data-overlay></div>
    
        </div>
      </header>

      <div class="header-spacer"></div>
      <br><br><br><br>
      <br><br><br><br>
      <br><br><br><br>
      <br><br><br><br>
      <br><br><br><br>

      <h2 class="reset-styles">Emoji Experiment</h2>
      <p class="reset-styles">ALLISON HOW DO YOU FEEL.</p>
      <br><br>
      <div id="emoji-bar">
        <!--Inspired by Artur BieÅ„ https://expensive.toys/toys/reactions-->
        <div class="emoji-container">
          <div class="emoji-button-container left">
            <button class="emoji-button" data-emoji="ğŸ˜¡">ğŸ˜¡</button>
          </div>
        </div>
        <div class="emoji-container">
            <div class="emoji-button-container">
              <button class="emoji-button" data-emoji="ğŸ˜¢">ğŸ˜¢</button>
            </div>
          </div>
        <div class="emoji-container">
          <div class="emoji-button-container">
            <button class="emoji-button" data-emoji="ğŸ™„">ğŸ™„</button>
          </div>
        </div>
          <div class="emoji-container">
            <div class="emoji-button-container">
              <button class="emoji-button" data-emoji="ğŸ‘">ğŸ‘</button>
            </div>
          </div>
          <div class="emoji-container">
            <div class="emoji-button-container">
              <button class="emoji-button" data-emoji="ğŸ˜†">ğŸ˜†</button>
            </div>
          </div>
        <div class="emoji-container">
          <div class="emoji-button-container right">
            <button class="emoji-button" data-emoji="â¤ï¸">â¤ï¸</button>
          </div>
        </div>
      </div>

      <h2 class="reset-styles" id="feelingswheel">TODAY ALLISON FEELS...</h2>


<div class="new-elements fade-in" id="second" >
    <div class="row">
        <div id="survey" class="square">
          <div class="top-section">
            <span class="number" id="surveysuccess"></span>
            <div class="icon positive">
                <img src="/assets/svg/upicon.svg" alt="down-icon" />
                <span class="percentage positive" id="surveypct"></span>
            </div>
        </div>
        <div class="label">
            <span id="surveytotal"></span>
        </div>
        </div>
        
    <div class="rectangle">
      <div id="loading-chart" style="width: 100%; height: 100%; text-align: center; vertical-align: middle; font-size: 25px;">Chart loading!</div>
      <canvas id="myChart"></canvas>
    </div>
</div>

  <!-- 
    - custom js link
  -->
  <script src="/assets/js/script.js" defer></script>
  <script>

</script>
      
<script>
    let clickcountSad = 0;
    let clickcountHappy = 0;

    $(".emoji-button").click(function() {
      var emoji = $(this).data("emoji");
      var newElement ="";
      if (emoji === "ğŸ˜¡") {
        var rages = ["ğŸ¤¬", "ğŸ‘º", "ğŸ˜ˆğŸ˜ˆ", "F*******CK", "#@$&^#", "LOSER", "ğŸ˜¡", "L+RATIO", "YOU'RE TRASH"]
        var rage = rages[Math.floor(Math.random() * rages.length)];
        newElement = $(`<span class='floating-emoji'>${rage}</span>`);
        plausible("Allison-sad");
        clickcountSad++
    
      } else if (emoji === "ğŸ¤¦" || emoji === "ğŸ™„") {
        var tears = ["mid", "ğŸ˜³", "ğŸ˜¤ğŸ˜¤", "ğŸ™„", "ğŸ˜", "ğŸ¤¢ğŸ¤¢",  "ğŸ’…ğŸ’…", "wtfğŸ˜•", "ğŸ¤¨", "uhhh gross ğŸ¤®", "ğŸ¤¦", "ick", "mmmm no..."]
        var tear = tears[Math.floor(Math.random() * tears.length)];
        newElement = $(`<span class='floating-emoji'>${tear}</span>`);
        plausible("Allison-sad");
        clickcountSad++
    
      } else if (emoji === "â¤ï¸") {
        var tears = ["LOVE THIS", "â¤ï¸", "ğŸ’—", "ğŸ’–ğŸ’–ğŸ’–", "ILYYY", "ğŸ’š", "ğŸ§¡", "ğŸ’›", "ğŸ¤", "ğŸ’™"]
        var tear = tears[Math.floor(Math.random() * tears.length)];
        newElement = $(`<span class='floating-emoji'>${tear}</span>`);
        plausible("Allison-happy");
        clickcountHappy++;
    
      } else if (emoji === "ğŸ˜¢") {
        var tears = ["ğŸ˜­", "ğŸ˜“", "ğŸ˜", "ğŸ˜¨", "ğŸ˜°", "ğŸ˜­ğŸ˜­ğŸ˜­", "noooo", "all the feels"]
        var tear = tears[Math.floor(Math.random() * tears.length)];
        newElement = $(`<span class='floating-emoji'>${tear}</span>`);
        plausible("Allison-sad");
        clickcountSad++
    
      } else if (emoji === "ğŸ˜†") {
        plausible("Allison-happy");
        newElement = $(`<span class='floating-emoji'>${emoji}</span>`);
        clickcountHappy++;

      } else if (emoji === "ğŸ‘") {
        plausible("Allison-happy");
        newElement = $(`<span class='floating-emoji'>${emoji}</span>`);
        clickcountHappy++;

      } else {
        newElement = $(`<span class='floating-emoji'>${emoji}</span>`);
      }
      $(this).parent().append(newElement);
    
      /* Choose an animation randomly */
    //   var animations = ['floatPath1', 'floatPath2', 'floatPath3','floatPath4', 'floatPath5', 'floatPath6']; // Add more animations as needed
      var test = ['floatPath2', 'floatPath3', 'floatPath4']; // Add more animations as needed
    
      var animation = test[Math.floor(Math.random() * test.length)];
    
      if (clickcountSad > 49) {
        plausible("allison-sad-100");
        clickcountSad = 0;
      }
      if (clickcountHappy > 49) {
        plausible("allison-happy-100");
        clickcountHappy = 0;
      }
      /* Apply the animation */
      newElement.css('animation', `${animation} 1s forwards`);
    
      setTimeout(function() {
        newElement.remove();
      }, 2000); // Remove the emoji after the animation completes (2 seconds)
    });
      
      
    
    </script>
  <script>
    fetch('/.netlify/functions/dashboard')
    .then(response => response.json())
    .then(data => {
      console.log(data);

      let excludedNames = ["Allison-happy", "Allison-sad", "allison-happy-100", "allison-sad-100"];

      let happyData = data.results.filter(item => excludedNames.includes(item.name));
      
      
      // square 1
      let surveyYes = document.getElementById('surveysuccess');
      let surveyTotal = document.getElementById('surveytotal');
      let surveypct = document.getElementById('surveypct');
      let surveyHappy = document.getElementById('feelingswheel');


      if (happyData[0].events > happyData[1].events) {
        surveyHappy.textContent = "ALLISON IS HAPPY TODAY"
        if (happyData.length > 2 && happyData[2].events > 0) {
            surveyHappy.textContent = "ALLISON IS SO HAPPY TODAY, SHE CLICKED HAPPY BUTTONS OVER 50 TIMES"

        }
        surveyYes.textContent = happyData[0].events;
        surveyTotal.textContent = 'Happy buttons clicked total';

        } else {
            surveyHappy.textContent = "ALLISON IS SAD TODAY"
            
            if (happyData.length > 3 && happyData[3].events > 0) {
            surveyHappy.textContent = "ALLISON IS SO SAD TODAY, SHE CLICKED SAD BUTTONS OVER 50 TIMES"

            }
            surveyYes.textContent = happyData[1].events;
            surveyTotal.textContent = 'Sad buttons clicked total';

        }
      
      // next step is to update surveypct intelligently.
      
    })
    .catch((error) => {
      console.error("Error:", error);
    });
  </script>
  <script>
    fetch('/.netlify/functions/allison')
  .then(response => response.json())
  .then(data => {
    // Prepare the data for the chart
    console.log(data);
    const labels = data.map(item => {
      const date = new Date(item.day);
      return date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
    });
    const visitors = data.map(item => item.data.results.events.value);
    // const sample = [75, 83, 104, 85, 155, 177, 183, 120, 82, 109, 111, 67, 129, 190, 144];
    
    // Create the chart
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: 'Happy clicks',
          data: visitors, // sample
          backgroundColor: 'rgba(233, 30, 99, 0.2)',
          borderColor: 'rgba(233, 30, 99, 1)',
          borderWidth: 3
        }]
      },
      options: {
        responsive: true,
        plugins: {
          title: {
            display: true,
            text: 'Allison Happiness by Day',
            font: {
              size: 30,
              family: 'Poppins'
            }
          },
          legend: {
            display: true,
            position: 'bottom'
          },
        },
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
    let loading = document.getElementById('loading-chart');
    loading.style.display = "none";
  })
  .catch(error => console.error('Error:', error));
  
  </script>

<!-- 
- ionicon link
-->
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

</body>
</html>