<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title>Change School</title>
    <meta name="title" content="Change School">
    <meta name="description" content="Swipe through 1,000's of Doorstops, personalized strategies for being happier in school.">
    <meta property="og:url" content="https://doorstopped.org/">
    <meta property="og:image" content="https://doorstopped.org/og.jpg">
    <meta name="twitter:image" content="https://doorstopped.org/og.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:title" content="Change School With Doorstops">
    <meta property="og:description" content="1,000's of personalized strategies for being happier in school. Swipe, play, learn, and find the perfect Doorstop.">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://doorstopped.org/dashboard">
    <meta property="twitter:title" content="Change School">
    <meta property="twitter:description" content="Swipe through 1,000's of Doorstops, personalized strategies for being happier in school.">
    <link href="./favicon.ico" rel="apple-touch-icon">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">

    <!-- include jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- include jQuery UI -->
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

    <!-- Hammer JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap"
    rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <link href="/essentialstyles.css" rel="stylesheet">

    <script defer data-domain="doorstopped.org" src="https://plausible.io/js/script.js"></script>
    <script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>
    <script>
        var sectionId = window.location.hash.substring(1); // Get the section ID from the URL
        if (sectionId) {
            // Since showSection is loaded at the bottom of the body, we need to ensure it's loaded.
            if (sectionId === "bingo-section") {
                var checkFunctionInterval = setInterval(function() {
                if (typeof showSection === 'function') {
                    showSection(4);
                    clearInterval(checkFunctionInterval);
                }
            }, 100);
            }
        }
    </script>
</head>

<body id="dashboard-body" style="display: none;">
    
    <!-- <div class="dinkydonk" id="popup" style="display: none;">
        <span class="close" id="closeBtn">&times;</span>
      </div> -->
      <div id="onboarding-element" style="position: absolute; z-index: 10;
      width: 100vw; height: 100vh; display: none; background-color: white; font-family: Poppins;  transition: opacity 1s; opacity: 1;">
        <div id="onboarding-hero" style="max-width: 100%; margin: auto; text-align: center;">
            <h1 class="big fade-in-med" >There are <strong style="color:  #aa0462;">1,000's of ways</strong> you can change school, <strong style="color:#cd6f6f; opacity: 0;" class="fade-in-slow">no matter what you're struggling with.</strong></h1>
              </div>
            </div>
        
              <div id="onboarding-survey" style="display: none; background-color: white; width: 100%; height: 100%; z-index: 7; font-family: Poppins"> 
            <br>
            <h2>What sucks about high school?</h2>
            <div style="display: inline-block">
            <p class="onboarding-choice" id="drama" onclick="toggleClick('drama')">The drama üíÖ</p>
            <!-- <p class="onboarding-choice" id="food" onclick="toggleClick('food')">The food ü§Æ</p> -->
            <p class="onboarding-choice" id="policy" onclick="toggleClick('policy')">The rules ü§¨</p>
            <p class="onboarding-choice" id="teacher" onclick="toggleClick('teacher')">This teacher üìö</p>
            <p class="onboarding-choice" id="money" onclick="toggleClick('money')">No money üí∞</p>
            <p class="onboarding-choice" id="boring" onclick="toggleClick('boring')">Boring classes üí§</p>
            <p class="onboarding-choice" id="mental" onclick="toggleClick('mental')">Mental Health üìâ</p>
        </div>
            <!-- <p class="onboarding-choice" id="vibes" onclick="toggleClick('vibes')">Toxic Vibes üôÑ</p> -->
            <button id="onboarding-button" class="onboarding-choice" style="background-color: rgba(170, 4, 98, 0.2);" onclick="moveOn()">
                <p style="color: white;">Fix school <img width="24px" height="24px" style="vertical-align: middle;" src="/assets/svg/Send_hor.svg"></p>
            </button>
        </div>
      <div id="desktop-sidenav" style="display: none">
        <a>            
            <img src="/assets/images/doors.svg" width="200" height="auto" alt="Doorstopped logo">
          </a>
          <br>
          <button id="nav2" class="desktop-button"><img class="nav-icon desktop" id="img2" src="/assets/svg/cards-dark.svg" alt="Icon 2" /><h2 class="desktop-text">&nbsp;Swipe</h2></button>
          <button id="nav3" class="desktop-button"><img class="nav-icon desktop" id="img3" src="/assets/svg/Favorite.svg" alt="Icon 3" /><h2 class="desktop-text">&nbsp;Doorstops</h2></button>
          <button id="nav4" class="desktop-button"><img class="nav-icon desktop" id="img4" src="/assets/svg/Lamp.svg" alt="Icon 4" /><h2 class="desktop-text">&nbsp;Explore</h2></button>
          <button id="nav5" class="desktop-button"><img class="nav-icon desktop" id="img5" src="/assets/svg/User_alt.svg" alt="Icon 5" /><h2 class="desktop-text">&nbsp;Account</h2></button>
          <button id="nav1" class="desktop-button"><img class="nav-icon desktop" id="img1" src="/assets/svg/Book_check.svg" alt="Icon 1" /><h2 class="desktop-text">&nbsp;Get the Fellas</h2></button>

          <br>
          <br><br>
      </div>
      <div id="desktop-main" style="display: none;">
        <!-- <div id="streak-notif" class="content" style="opacity: 0; position: absolute; right: 1em; width: 20%; margin: 0; text-align: left; bottom: 1em; z-index: 3;">Streak notif!</div> -->
        <!-- <div onload="loadOtherContent()"></div> -->

    <div id="card-container">
<!-- https://docs.google.com/document/d/11P4QWkMnrIncEmLfpRdEkfbRcX5yBMJOPBnduFPxgGE/edit -->
        <div class="card" style="display: none;">
            <h2>More coming soon!</h2>
            <!-- <img src="/assets/cards/badfood.webp" alt="image2" /> -->
            <p></p>
        </div>
        <div id="survey-card-50" class="card" style="display: none;" data-category="50-swipes-survey-yes">
            <h2>You've swiped through 50 Doorstops! Have we helped you feel happier in school?</h2>
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/taylor-swift.mp4" data-src-webm="/assets/cards/whatever-shrug.webm" >
              </video>               
              <p>Swipe right for yes, swipe left for no.</p>
        </div>
              <!-- <div class="card" data-link="/time" style="display: none;">
            <h2>Nobody shows up</h2>
            <p>because the school is awful</p>
        </div>
              <div class="card" data-link="/emotionwords" style="display: none;">
            <h2>Emotional unavailability</h2>
            <p>*cough* men</p>
        </div>
              <div class="card" data-link="/doorstops/teachit" style="display: none;">
            <h2>Boredom</h2>
            <p>Window-Staring 101</p>
        </div> -->
              <div id="unfinished1" class="card" data-link="doorstops/shift#enemy" style="display: none;"> 
                <!--link to doorstopfellows in the future-->
            <h2>Apathy</h2>
            <p>Nobody gives a fuck.</p>
        </div>
              <div id="unfinished2" class="card" data-link="/programs/conversations" style="display: none;">
            <h2>Nobody respects teachers</h2>
            <p>So class gets loud</p>
        </div>
              <div id="unfinished3" class="card" data-link="/doorstops/listen" style="display: none;">
            <h2>Anxiety</h2>
            <p>Feet tapping all class</p>
        </div>
              <div id="unfinished4" class="card" data-link="/doorstops/care" style="display: none;">
            <h2>Insecurity</h2>
            <p>Smart people think they‚Äôre dumb</p>
        </div>
        <!-- <div class="card" data-link="/doorstops/shift" style="display: none;">
            <h2>Students are all {negative emotion}</h2>
            <p>Straight up.</p>
        </div> -->
              <div id="unfinished5" class="card" data-link="/doorstops/ref" style="display: none;" data-category="culture">
            <h2>Competitiveness</h2>
            <p>wha- wha- whadidya get?!</p>
        </div>

              <!-- <div class="card" data-link="/doorstops/radical" style="display: none;" data-category="self-advocacy">
            <h2>Powerlessness</h2>
            <p>You feel trapped at your desk</p>
        </div>
              <div class="card" data-link="/doorstops/shift" style="display: none;" data-category="culture">
            <h2>Racism tolerated or endorsed.</h2>
            <p>People transfer schools because of it.</p>
        </div> -->
<!--  
              <div class="card" data-link="/doorstops/poop" style="display: none;" data-category="wellbeing">
            <h2>Gross bathrooms</h2>
            <div class="tenor-gif-embed" data-postid="20464269" data-share-method="host" data-aspect-ratio="1.77778" data-width="100%"></div> 
            <p>Nobody poopin.</p>
        </div> -->
        <div id="mental-card-5" class="card" data-link="/programs/conversations" style="display: none;" data-category="wellbeing">
            <h2>No mental health help</h2>
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/cute-animals-goat.mp4" data-src-webm="/assets/cards/cute-animals-goat.webm" >
              </video>  
            <p>"Guidance" counselors</p>
        </div>

              <!-- <div class="card" data-link="/doorstops/shift" style="display: none;" data-category="culture">
            <h2>"You're a try-hard"</h2>
            <p>You get put down for caring.</p>
        </div> -->
        <div id="mental-card-4" class="card" data-link="/doorstops/college" style="display: none;" data-category="college-career">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/no-stress.mp4" data-src-webm="/assets/cards/no-stress.webm" >
              </video>
              <div class="card-caption" > 
                <h2>COLLEGE APPLICATION STRESS</h2>

              <p>Swipe for some resources on how to navigate college applications! <br> Unless you're a freshman. What are you doing still reading, freshman.</p>
        </div>
    </div>

              <!-- <div class="card" data-link="/doorstops/othercareers" style="display: none;" data-category="college-career">
            <h2>HS feels like a dead end</h2>
            <p>It‚Äôs McDonalds or fame</p>
        </div> -->

        <div id="vibes-card-6" class="card" data-link="/doorstops/shift#outlet" style="display: none;" data-category="culture">
            <h2>Decreasing Violence</h2>
            <p>People hiding in the bathroom, too scared to go to lunch.</p>
        </div>
        <!-- <div class="card" data-link="https://blog.benguzovsky.com/why" style="display: none;" data-category="self-advocacy">
            <h2>What's the point of ____ class?</h2>
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-wrestling.mp4" data-src-webm="/assets/cards/whatever-shrug.webm" >
              </video>             <p>We're not learning what matters</p>
        </div> -->
              <!-- <div class="card" data-link="/doorstops/shift#enemy" style="display: none;">
            <h2>Social divides</h2>
            <p>rich/poor, black/white</p>
        </div> -->
        <div id="career-card-2" class="card" data-link="/doorstops/intern" style="display: none;" data-category="college-career">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/cute-animals-goat.mp4" data-src-webm="/assets/cards/cute-animals-goat.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Get a COOL INTERNSHIP as a HIGH SCHOOLER</h2>
                <p>1. Find a cool company 2. Look up what they do and 3. Wow them with a five sentence email.</p>
        </div>
    </div>

        <div id="mental-card-3" class="card" data-link="https://www.teenagegriefsucks.com/" style="display: none;" data-category="SEL-skills">
            <h2>Living with losing a friend or loved one</h2>
            <img src="/assets/images/teengrief.png" alt="image1"/>
            <br>
            <p></p>
            <p>Swipe right to go to a website with stories from other teenagers who lost a loved one.</p>
        </div>
<!-- <audio id="emotional damage">
                <source src="/assets/mp3/damage.mp3" type="audio/mpeg">
              </audio> -->
            <!--<img src="/assets/images/moon.png" alt="image2" />-->
        <!-- <div class="card" id="damage" data-link="/doorstops/listen" style="display: none;" data-category="SEL-skills">
            <h2>Emotional Availability is Sexy</h2>
            
            <p>Ever been injured where you can kind of play but it hurts more every game? You know you should stop but the season seems so close.<br><strong>School can feel the same way</strong>: you‚Äôre stuck on an assignment or you have no idea what‚Äôs going on in class, but stick it out, head down, and make it to the end of the semester.<br>But school‚Äôs different. If you <strong>ask for help</strong>, you don‚Äôt get taken out of the game, <strong>you get back in</strong>. You get better. Your teacher respects you more.<br>Everyone's struggled like this. Wanna hear professional athletes say it?</p>
        </div> -->
        <div id="career-card" class="card" style="display: none;" data-link="/doorstops/mentor" data-category="college-career">
            <video autoplay playsinline muted loop id="mentor" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-tumbles-down.mp4" data-src-webm="/assets/cards/panda-tumbles-down.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Find a mentor:</h2>

            <p>someone with a cool career who'll help you ~thrive~</p>
        </div>
    </div>

        <div id="survey-card-25" class="card" style="display: none;" data-category="25-swipes-survey-yes">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/taylor-swift.mp4" data-src-webm="/assets/cards/whatever-shrug.webm" >
              </video>
              <div class="card-caption" > 
                <h2>You've swiped through 25 Doorstops! Have we helped you feel happier in school?</h2>

              <p>Swipe right for yes, swipe left for no.</p>
        </div>
    </div>

        <div id="drama-card-3" class="card" data-link="/doorstops/shift" style="display: none;" data-category="culture">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-tumbles-down.mp4" data-src-webm="/assets/cards/panda-tumbles-down.webm" >
              </video>
              <div class="card-caption" > 
                <h2>REAL TIME VIDEO OF YOUR ENEMIES COLLAPSING</h2>
                <p>If your school has cliques and drama to an extreme, you deserve a better culture.</p>
        </div>
    </div>


        <div id="policy-card-4" class="card" data-link="/doorstops/introuble#mainscript" style="display: none;" data-category="self-advocacy">
            <video autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-tumbles-down.mp4" data-src-webm="/assets/cards/panda-tumbles-down.webm" alt="pandas falling over each other" >
              </video>
              <div class="card-caption" > 
                <h2>WHAT TO SAY WHEN YOU'RE IN TROUBLE</h2>
            <p>Here's how to be in... less trouble.</p>
        </div>
    </div>

      <div id="vibes-card-5" class="card" data-link="/doorstops/shift#clout" style="display: none;" data-category="culture">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-wrestling.mp4" data-src-webm="/assets/cards/panda-punch.webm" >
              </video>
              <div class="card-caption" > 
                <h2>End the Small jabs</h2>
              <p>No more insults in the halls and middle school shit</p>
        </div>
    </div>

              <div id="harass-card-2" class="card" data-link="/doorstops/shift#referent" style="display: none;" data-category="culture"> 
            <!-- https://www.youtube.com/watch?v=OqXC6tcmW_U -->
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-wrestling.mp4" data-src-webm="/assets/cards/panda-wrestling.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Fighting Harrassment Culture</h2>

                <p>Guys do awful stuff to girls, nobody says anything.</p>

            </div>

        </div>
        <div id="drama-card-2" class="card" data-link="/doorstops/harassment" style="display: none;" data-category="culture">
            <h2>Anonymously Report Harassment, Cyber-bullying, or SA</h2>
            <!-- <div class="tenor-gif-embed" data-postid="17224602" data-share-method="host" data-aspect-ratio="1.22605" data-width="100%"></div> -->
            <br>
            <p>100% private, we don't collect your email address. And we help you write the message!</p>
        </div>
        <div id="vibes-card-4" class="card" data-link="https://fix.school/doorstops/name" style="display: none;" data-category="self-advocacy">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/theoffice-stevecarell.mp4" data-src-webm="/assets/cards/mama-chase.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Get your name pronounced right</h2>

                <p>DON'T LET TEACHERS CALL YOU BY THE WRONG NAME ALL YEAR, IT DOESN'T HAVE TO BE THIS WAY.</p>

            </div>

        </div>
        <div id="teacher-card-5" class="card" data-link="/doorstops/talkdown" style="display: none;" data-category="self-advocacy"> 
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-slide.mp4" data-src-webm="/assets/cards/baby-yoda-mandalorian.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Adults talking to you like you're five years old.</h2>
                <p>Recognize and respond when people act like you can't think or do for yourself. You can, bestie.</p>

            </div>

        </div>
        <div id="boring-card-5" class="card" data-link="/doorstops/getout" style="display: none;" data-category="self-advocacy">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/depressed-bored.mp4" data-src-webm="/assets/cards/depressed-bored.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Feel stuck in class?</h2>
                <p>Get consistent free time during class WHILE fixing the vibes with your teacher.</p>
            </div>

        </div>
        <div id="policy-card-3" class="card" data-link="/programs/phones" style="display: none;" data-category="policy">
            <h2>Admin don't communicate</h2>
            <img src="/assets/images/sadcat.jpg" style="max-width: 100%;" alt="sad cat"/><!--Creds to sari https://www.sari.studio/store/p/print-sad-cat-->
            <p>They literally don't ask you for advice, don't tell you before they change something, and when shit goes down, they don't say <em>anything.</em></p>
        </div>
        <!-- <div class="card" data-link="PERSONALIZED" style="display: none;">
            <h2>Want personalized suggestions?</h2>
                <div class="tenor-gif-embed" data-postid="13813979" data-share-method="host" data-aspect-ratio="1.71724" data-width="100%"></div> 
            <br>
            <p>We never see your data: it's only saved on your own device (so don't clear cache!)</p>
        </div> -->
        <!-- <div class="card" data-link="/doorstops/escape" style="display: none;" data-category="STR">
            <h2>You have rights, actually.</h2>
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/depressed-bored.mp4" data-src-webm="/assets/cards/depressed-bored.webm" >
              </video>              
              <br>
            <p>Make sure that when you get in trouble, you don't get into <em>too much trouble</em><br><br>
            <span class="envy">Renegotiate how punishment works.</span></p>
        </div> -->

        <div id="stress-card-2" class="card" data-link="/doorstops/parents" style="display: none;" data-category="external">
            <!-- <div class="tenor-gif-embed" data-postid="16251810" data-share-method="host" data-aspect-ratio="1.2749" data-width="100%"></div> -->
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/theoffice-stevecarell.mp4" data-src-webm="/assets/cards/tenor-panda-chase.webm" >
              </video>
              <div class="card-caption" > 
                <h2>Take 2 minutes to 2x your GPA </h2>
                <p>The Q your parents never ask could help you do better</p>
            </div>

        </div>
        <div id="boring-card-4" class="card" data-link="/doorstops/lifehacks" style="display: none;" data-category="culture">
            <video autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-fat.mp4" data-src-webm="/assets/cards/panda-fat.webm" alt="panda shaking its bum" >
              </video>
              <div class="card-caption" > 
                <h2>EVEN MORE School Life Hacks</h2>

            <p>Don't worry, we got you.</p>
            </div>
        </div>
        <div id="money-card" class="card" data-link="/doorstops/money" style="display: none;" data-category="policy">
            <video autoplay playsinline muted loop id="myVideo" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/bank-banking.mp4" data-src-webm="/assets/cards/bank-banking.webm" >
              </video>
              <div class="card-caption" > 
                <h2>No money in the district</h2>

            <p>Fundraise with proven strats</p>
        </div>

        </div>

        <!-- <div class="card" style="display: none;">
            <h2>Show me more about making class less boring</h2>
            <div class="tenor-gif-embed" data-postid="13813979" data-share-method="host" data-aspect-ratio="1.71724" data-width="100%"></div> 
            <br>
        </div> -->
        <div id="teacher-card" class="card" data-link="/doorstops/hard" data-category="culture">
            <video autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/taylor-swift.mp4" data-src-webm="/assets/cards/panda-punch.webm" alt="pandas punching but failing" >
              </video>
              <div class="card-caption" > 
                <h2>Conflict is <span class="loud">*okay*</span> stop avoiding telling your teacher something's wrong</h2>  
                <p>Having a hard conversation with a teacher starts with a pastrami sandwich and a bloodborne pathogen test. Swipe and it'll make sense.</p>

                </div>
        </div> 
        <div id="money-card-3" class="card" data-link="/doorstops/poop" style="display: none;" data-category="wellbeing">
            <h2>No urinal dividers?</h2>
            <div style="display: flex; justify-content: center;">
                <video autoplay playsinline muted loop width="75%" class="card-video">
                    <source data-src-mp4="/assets/cards/mp4/funny-fail.mp4" data-src-webm="/assets/cards/funny-fail.webm" alt="panda shaking its bum" >
                  </video>          
                </div><br>
            <!-- <p>Why is nobody poopin' at your school?</p>
            <p>Don't worry, we got you.</p> -->
        </div>

        <div id="boring-card-3" class="card" data-link="/doorstops/teachit" style="display: none;" data-category="STR">
            <h2>No good classes? Teach one yourself.</h2>
            <div style="display: flex; justify-content: center;">
                <video autoplay playsinline muted loop width="75%" class="card-video">
                    <source data-src-mp4="/assets/cards/mp4/professor-prova.mp4" data-src-webm="/assets/cards/professor-prova.webm" alt="teacher grading" >
                  </video>              
                </div>
            <!-- <br>
            <p>We make it easy for you to get started.</p> -->
        </div>
        <!-- <div class="card" data-link="/doorstops/othercareers" style="display: none;" data-category="culture">
            <h2>No idea what you want to do when you graduate?</h2>
            <video id="careers" autoplay playsinline muted loop width="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-relaxing.mp4" data-src-webm="/assets/cards/dancing-panda-2.webm" alt="panda shaking its bum" >
              </video>              
              <br>
            <p>THERE ARE OTHER CAREERS BESIDES ATHLETE AND ACTOR AND SOME OF THEM ARE COOL.</p>
        </div> -->
      <div id="vibes-card-3" class="card" data-link="/doorstops/shift" style="display: none;" data-category="culture">
            <h2>Seriously, End the Bad Vibes. No bullying. No toxic groupchats.</h2>
            <video id="badvibes"  autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-dancing.mp4" data-src-webm="/assets/cards/panda-dancing.webm" alt="panda shaking its bum" >
              </video>              
              <p>Even MORE Strategies perfect for your school.</p>
        </div>
        <div id="harass-card" class="card" data-link="/doorstops/boundaries" style="display: none;" data-category="STR">
            <h2>Do your male teachers make a lil too much eye contact?</h2>
            <video id="eyes" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/no-stress.mp4" data-src-webm="/assets/cards/dancing-panda.webm" alt="panda shaking its bum" >
              </video>              
              <p>RESPOND TO PEOPLE CROSSING YOUR BOUNDARIES.</p>
        </div>
        <div id="teacher-card-4" class="card" data-link="/doorstops/dominance" style="display: none;" data-category="STR">
            <h2>Strictness, old teachers, mean teachers... we got you.</h2>
            <video autoplay playsinline muted loop id="eating" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/eye-roll-meme.mp4" data-src-webm="/assets/cards/eye-roll-meme.webm" >
              </video> 
            <p>Trapped at your desk?</p>
        </div>

        <div id="teacher-card-3" class="card" data-link="/doorstops/mean" data-category="culture">
            <video id="punch1" autoplay playsinline muted loop  height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-wrestling.mp4" data-src-webm="/assets/cards/panda-punch.webm" alt="pandas punching but failing" >
              </video>  
              <div class="card-caption">
                <h2>Are your teachers bullies?</h2>
                <p><strong>Choose from three solutions that hold your teachers accountable and change the culture.</strong></p>
              </div>
        </div> 
        <div id="food-card" class="card" data-link="/programs/eat" style="display: none;" data-category="wellbeing">
            <h2>Lunch awful?</h2>
            <img src="/assets/cards/badfood.webp" height="100%" style="object-fit: contain; max-width: 100%;">            
            <!-- <p>Pull out your mini waffle maker, or we'll buy one for you. Work your way up to your own food truck.</p>  -->
            <p>Become a school lunch entrepreneur.</p>
        </div>
        <div id="policy-card-2" class="card" data-link="https://fix.school/school/dayoff" style="display: none;" data-category="policy">
            <video id="50mil" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/bank-banking.mp4" data-src-webm="/assets/cards/bank-banking.webm" alt="dog working" >
            </video>  
            <div class="card-caption"> 
                <h2>Get a schoolwide day off</h2>

            <p>Show them who's boss</p>
            </div>
        </div>

        <div id="policy-card" class="card" data-link="https://fix.school/school" style="display: none;" data-category="policy">
            <video id="50mil" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/bank-banking.mp4" data-src-webm="/assets/cards/bank-banking.webm" alt="dog working" >
              </video>  
              <div class="card-caption"> 

              <h2>Schools manage $50 million a year. How do they work?</h2>

            <p>Control <strong>100k</strong>, selfie diplomacy, hostile takeover, policy change.</p>
            </div>
        </div>
        <div id="boring-card-2" class="card" data-link="https://fix.school/time" style="display: none;" data-category="culture">
            <video id="rage" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/angry-panda.mp4" data-src-webm="/assets/cards/angry-panda.webm" alt="pandas waking up" >
              </video>   
              <div class="card-caption"> 
                <h2>Is class a waste of time? Prove it and change it.</h2>
              <p>All it takes is pulling out your phone timer... and using our nationwide dataset to prove there's room for growth.</p>
        </div>        
    </div>


        <div id="vibes-card-2" class="card" data-link="/doorstops/points" data-height="30000px" data-category="culture">
            <video autoplay playsinline muted loop id="armwrestle" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-tumbles-down.mp4" data-src-webm="/assets/cards/panda-tumbles-down.webm" alt="pandas falling over each other" >
              </video>  
            <br>
            <div class="card-caption"> 
                <h2>If people arm wrestle for participation points</h2>
            <p><strong>End the GPA obsession with a participation point boycott.</strong></p>
            </div>
            <!-- <p>Nobody speaks in class until participation grading is equitable.</p> -->
        </div> 
        <div id="vibes-card" class="card" data-link="https://fix.school/doorstops/ref" style="display: none;" data-category="culture">
            <video id="tvibes" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-fat.mp4" data-src-webm="/assets/cards/pandastic-panda.webm" alt="panda shaking its bum" >
              </video>  
              <div class="card-caption"> 
                <h2>Clean up the toxic vibes</h2>

            <p>Use the best behavioral psych research in the GAME to fix it all: from toxic groupchats to bathroom vaping.</p>
        </div>
    </div>
        <div id="mental-card-2" class="card" data-link="/doorstops/better" style="display: none;" data-category="policy">
            <video autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-dancing.mp4" data-src-webm="/assets/cards/dancing-panda-2.webm" alt="pandas punching but failing" >
              </video>     
              <div class="card-caption"> 
       
              <h2>12 ways to be way happier in school</h2>
              <p>All the life hacks you didn't know you needed</p>
              </div>
        </div>
        <div id="mental-card" class="card" data-link="/doorstops/naptime" style="display: block;" data-category="STR">
            <video id="naptime" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/cute-animals-goat.mp4" data-src-webm="/assets/cards/panda-wakeup.webm" alt="pandas waking up" >
              </video>              
              <div class="card-caption"> 
                <h2>Bring back nap time</h2>

                <p>Sleep during school. And not *just* in your boring classes.</p>
                </div>
        </div>
        <div id="stress-card" class="card" data-link="/doorstops/extension#i-just-want-to-email" data-height="300000px" data-category="SEL-skills">

                <video autoplay playsinline muted loop id="extension" height="100%" class="card-video">
                    <source data-src-mp4="/assets/cards/mp4/panda-sad.mp4" data-src-webm="/assets/cards/panda-sad.webm" alt="sad panda" >
                  </video>  
                  <div class="card-caption">
                    <h2>Essay due in two days? Haven‚Äôt started?</h2>
                    <p>We can help‚Äîall you have to do is copy-paste.</p>
                  </div>
        </div>
        <div id="food-card-3" class="card" data-link="/doorstops/microwave" style="display: none;" data-category="wellbeing">
            <video autoplay playsinline muted loop id="microwave" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-fat.mp4" data-src-webm="/assets/cards/dancing-panda-2.webm" >
              </video>        
              <div class="card-caption"> 
                <h2>Get a microwave.</h2>

            <p>Stop eating cold sandwiches, bestie.</p>
            </div>
        </div>
        <div id="teacher-card-2" class="card" data-link="/doorstops/feedback" style="display: none;" data-height="3000px" data-category="STR">
            <video autoplay playsinline muted loop id="boring" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/depressed-bored.mp4" data-src-webm="/assets/cards/depressed-bored.webm" >
              </video>              <br>
            
              <div class="card-caption"> 
                <h2>Boring classes?</h2>

                <p>Give your teacher anonymous, constructive feedback that will make class better.</p>
                </div>
        </div>

        <div id="drama-card" class="card" data-link="https://fix.school/doorstops/conflict" data-category="peers">
            <video id="tumbles" autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-tumbles-down.mp4" data-src-webm="/assets/cards/panda-tumbles-down.webm" alt="pandas falling over each other" >
              </video>  
            <br>
            <div class="card-caption" > 
                <h2>Beef with a bestie? Conflict doesn't have to be *bad*</h2>
                <p>Did they post a pic where they looked great and you looked like a gremlin? We got you.</p>

                </div>
            <!-- <p>If you don't know what to say or how to handle a tough situation, we got you.</p> -->
        </div> 
<!--         
        <div class="card" id="more culture" style="display: none;">
            <h2>Show me more about changing school culture</h2>
            <div class="tenor-gif-embed" data-postid="13813979" data-share-method="host" data-aspect-ratio="1.71724" data-width="100%"></div> 
            <br>
        </div> -->

        <div id="money-card-2" class="card" data-link="/doorstops/poop" style="display: none;" data-category="wellbeing">
                <video autoplay playsinline muted loop height="100%" class="card-video">
                    <source data-src-mp4="/assets/cards/mp4/funny-fail.mp4" data-src-webm="/assets/cards/funny-fail.webm" alt="panda shaking its bum" >
                  </video>          
                <div class="card-caption" > 
                    <h2>Bathrooms plain... gross?</h2>
                    </div>
            <!-- <p>Why is nobody poopin' at your school?</p>
            <p>Don't worry, we got you.</p> -->
        </div>
        
        <div id="boring-card" class="card" data-link="https://fix.school/doorstops/leverage" style="display: block;" data-category="self-advocacy">

            <video autoplay playsinline muted loop height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/panda-dancing.mp4" data-src-webm="/assets/cards/panda-wrestling.webm" >
              </video> 
              <div class="card-caption"> 
                <h2 style="font-size: 20px; color: #FFF7F7">Cutting class costs your school üí∞üí∞</h2>

                <p style="color: #FFF7F7">Use that as negotiating leverage.</p>
            </div>
        </div>
        <div id="food-card-2" class="card" data-link="https://fix.school/doorstops/food" data-category="peers">
            <video autoplay playsinline muted loop id="eating" height="100%" class="card-video">
                <source data-src-mp4="/assets/cards/mp4/eye-roll-meme.mp4" data-src-webm="/assets/cards/eye-roll-meme.webm" >
              </video> 
                    <div class="card-caption" > 
                        <h2>Toxic comments about eating</h2>
                        <p>Respond without causing drama!</p>
                    </div>
                </div>
        <!--
        <div class="card" data-link="/doorstops/points">
        <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@ahsokka_/video/7207198809548492037" data-video-id="7207198809548492037"  data-autoplay playsinline="true" style="min-width: 100%"> <section> <a target="_blank" title="@ahsokka_" href="https://www.tiktok.com/@ahsokka_?refer=embed">@ahsokka_</a> </section></blockquote> <script async src="https://www.tiktok.com/embed.js"></script>
        </div>
        -->
        <div id="first" class="card">
                <div id="overlay">
                <h2 class="overlay-text" style="text-align: center; max-width: 80%; padding-bottom: 10px;">Swipe through problems you might have at school</h2>
                <br>
                <div style="display: flex; flex-direction: row; justify-content: center;">
                    <div>
                        <h2 class="overlay-text" style="text-align: left; max-width: 90%;">Swipe right for a solution </h2>
                        <br>

                    </div>
                    <img width="90px" src="/assets/svg/swiperight.svg">
                </div>
                <br>
                <div style="display: flex; flex-direction: row; justify-content: center;">
                    <img width="90px" src="/assets/svg/swipeleft.svg">                   
                    <div>
                        <h2  class="overlay-text" style="text-align: left; max-width: 90%;">Swipe left to see another problem</h2>
                    </div>
                </div>
                <br><br><br>
            </div> 
            <div id="firstElemContent" style="height: 100%;">
                                    <!-- style="z-index: 3;" -->

        </div>
        </div>

    </div>
    <div id="swiped-right-section" style="display: none;">
        <div class="content">
            <h1>Doorstop Fellows</h1>
            <p style="text-align: left;">Get dedicated support from an education researcher that helps you change your school. All it takes is filling out <a href="https://forms.gle/m44US3QYazrksKht9" style="text-decoration: underline;">this survey</a> and (optional) starting a club! Everyone is invited: class clowns, class cutters, or talk backers ‚Äî anyone kind enough and kinda wild.
            </p>
            <br>
            <h2>Education doesn‚Äôt work without your voice</h2>
            <p style="text-align: left;">Every school has its own toxic vibes: the wrong people, the wrong culture, stress, straight up violence, everybody staring out the window thinking, "What's the point?"</p>              
            <br>   
            <p style="text-align: left;"><strong>We teach you to change what sucks.</strong> Big problems, small, whatever: we‚Äôll conquer Italy if we have to.</p>
            <br>
            <h2>We open doors, literally.</h2>
            <p style="text-align: left;">We‚Äôll help you get the experience (and clout) you need for career, college, and any dream you want to chase after college. <strong>Slap it on your resume, don‚Äôt tell your mom.</strong></p>
            <br>
            <h2>We don‚Äôt care about your GPA</h2>
            <p style="text-align: left;">We don‚Äôt care if you‚Äôve solved climate change or if you didn‚Äôt get out of bed this morning. We don‚Äôt care if you‚Äôre a captain of three sports teams, and we don‚Äôt care if you‚Äôve never done a sport.</p>
            <p style="text-align: left;">We want the one-man homework hotline. The divas. The people who make other people smile. The people who want to speak up, but don‚Äôt know how ‚Äî yet.            </p>
            <br>
            <h3 style="text-align: left;">We have one value:
            </h3>
            <h2 style="text-align: left;">Make school better by any means necessary. 
            </h2>
            <br>
            <h1>Get the fellas</h1>
            <p style="text-align: left;"><strong>Answer three short questions</strong> at <a href="https://forms.gle/m44US3QYazrksKht9" style="text-decoration: underline;">this link</a>.

                <br><strong>Meet with a Senior Fellow</strong> online for 15 minutes.
                
                <br><strong>We‚Äôll bring ideas</strong>, strategies, and support. You bring you.</p>
        </div>
    </div>
    <div id="left-section" style="display: none;">
        <div id="doorstop-onboarding" style="position: relative;  display: none;">
                <h2 class="tooltip top floating fade-in" id="swiping-back">‚Üê go back to<br>swiping</h2>
                <h2 class="tooltip bot floating fade-in" id="explore-back">‚Üê search by<br>problem!</h2>
        </div>
        <br><br id="scrollToHere">
        <iframe id="howto" src="/doorstops/howto-embed" width="100%" height="600vh"></iframe>
        <div id="content-placeholder">
        <!-- for iframe imports <iframe id="main" width="100%" height="300000px"></iframe> -->
            
        </div>
        <iframe width="100%" height="200px" style="min-height: 400px" id="doorstop-frame"></iframe>


     
        <br><br>
    </div>
    <div id="bingo-section" style="display: none;"> 
        <br><br>
        <div id="search-container" style="max-width: 90%; margin: auto;">
            <input type="text" id="search-input" placeholder='Search Doorstops... try "class is boring"' autocomplete="off">
            <div id="results-container"></div>         
        </div>
        <div id="bingo-action" class="bingo"></div>

    </div>
    <div id="account-section" class="account" style="display: none;"> 
        <!-- Customization survey -->
        <br><br>
  

        <div class="content" id="content">

            <!-- <img src="/assets/images/childbehind.jpg" alt="Descriptive image alt text" /> -->
            <h1>Get personalized Doorstops.</h1>

                <div id="question-container" class="question">
                    <div id="question-1" class="question-content active">
                        <p>At school I'm usually:</p>
                        <div class="options">
                            <div>
                            <label><input type="checkbox" name="mood" value="Stressed"> Stressed</label>
                            <label><input type="checkbox" name="mood" value="Frustrated"> Frustrated</label>
                            <label><input type="checkbox" name="mood" value="Disrespected"> Disrespected</label>
                            <label><input type="checkbox" name="mood" value="Bored"> Bored</label>
                        </div>
                        <div>
                            <label><input type="checkbox" name="mood" value="Angry"> Angry</label>
                            <label><input type="checkbox" name="mood" value="Anxious"> Anxious</label>
                            <label><input type="checkbox" name="mood" value="Lonely"> Lonely</label>
                            <label><input type="checkbox" name="mood" value="Powerless"> Powerless</label>
                        </div>
                        </div>
                        <br>
                        <button class="form-button" onclick="nextQuestion(1)">Next ‚Üí</button>

                    </div>
                    <div id="question-2" class="question-content">
                        <p>I'm in clubs/sports:</p>
                        <div class="options">
                            <label><input type="radio" name="clubs-sports" value="Yes"> Yes</label>
                            <label><input type="radio" name="clubs-sports" value="No"> No</label>
                        </div>
                        <br>

                        <button class="form-button" onclick="nextQuestion(2)">Next ‚Üí</button>
                    </div>
                    <div id="question-3" class="question-content">
                        <p>I'm a minority in my school:</p>
                        <div class="options">
                            <label><input type="radio" name="minority" value="Yes"> Yes</label>
                            <label><input type="radio" name="minority" value="No"> No</label>
                        </div>
                        <br>
                        <button class="form-button" onclick="nextQuestion(3)">Next ‚Üí</button>
                    </div>
                    <div id="question-4" class="question-content">
                        <p>My school doesn't fully understand/respect my gender or sex identity:</p>
                        <div class="options">
                            <label><input type="radio" name="gender-identity" value="Yes"> Yes</label>
                            <label><input type="radio" name="gender-identity" value="No"> No</label>
                        </div>
                        <br>
                        <button class="form-button"  onclick="nextQuestion(4)">Next ‚Üí</button>
                    </div>
                </div>
                <div id="completion-message" class="question-content">
                    <p>Completed! - Starting September 15, your feed will be personalized based on your answers</p>
                    <button class="form-button" >Redo the survey</button>
                    <button class="form-button" onclick="window.location.href = '/doorstops/howto'">See the Doorstop how-to guide</button>
                </div>
              <!-- <input class="button modal-toggle" id="subtn" type="submit" value="Submit"> -->
          </div>
        <br>
        <div class="content" id="content">
            <h1>See the Doorstops you swiped right on:</h1>
            <!-- <h3 id="streak"><img style="width: 16px; height: 16px; display: inline; margin-right: 3px;" src="/assets/svg/finished.svg"><img style="width: 16px; height: 16px; display: inline; margin-right: 3px;" src="/assets/svg/unfinished.svg"></h3> -->
        </div>
        <br>
        <ul id="swiped-right-list"></ul>

    </div>
</div>
    <div id="navbar">
        <button id="nav1m"><img class="nav-icon" id="img1m" src="/assets/svg/Book_check.svg" alt="Icon 1" /></button>
        <button id="nav4m"><img class="nav-icon" id="img4m" src="/assets/svg/Lamp.svg" alt="Icon 4" /></button>
        <button id="nav2m"><img class="nav-icon" id="img2m" src="/assets/svg/cards-dark.svg" alt="Icon 2" /></button>
        <button id="nav3m"><img class="nav-icon" id="img3m" src="/assets/svg/Favorite.svg" alt="Icon 3" /></button>
        <button id="nav5m"><img class="nav-icon" id="img5m" src="/assets/svg/User_alt.svg" alt="Icon 5" /></button> <!--Account Icon-->
    </div>
<!-- <script>
    const loadOtherContent = () => {
    document.getElementById("first").innerHTML = `            <h2 font-size="80pt">Swipe right to change school</h2>
            <h2>Swipe left to see another strategy</h2>`;
}
</script> -->
    <script>
    // onboarding flow on first load
        let onboardingDone = localStorage.getItem("onboardingDone");
        let currentVideoIndex = 0;

        if (!onboardingDone) {
            let start = document.getElementById("onboarding-element")
            if (start) {
                start.style.display = "flex";
                // document.getElementsByClassName("triangle-main")[0].style.display = "none";
                // document.getElementsByClassName("triangle-left")[0].style.display = "none";
            } else {
                document.addEventListener("DOMContentLoaded", function() {
                    document.getElementById("onboarding-element").style.display = "flex";
                    // document.getElementsByClassName("triangle-main")[0].style.display = "none";
                    // document.getElementsByClassName("triangle-left")[0].style.display = "none";
                });
            }
            setTimeout(function() {
            document.getElementById("onboarding-element").classList.add("fade-out-med");
        }, 3000);
        setTimeout(function() {
            document.getElementById("onboarding-element").style.zIndex = "-1";
            document.getElementById("onboarding-survey").style.display = "flex";
        }, 4000)

            localStorage.setItem("onboardingDone", "true")
        } else {
            let prevLeft = localStorage.getItem('swipedLeft');
            let prevRight = localStorage.getItem('swipedRight');

            prevLeft = prevLeft ? JSON.parse(prevLeft) : [];
            prevRight = prevRight ? JSON.parse(prevRight) : [];

            let pastSwipes = prevLeft.concat(prevRight);
            for (let i = 0; i < pastSwipes.length; i++) {
                console.log(pastSwipes.length);
                let usedCard = document.getElementById(pastSwipes[i].id)
                if (usedCard) {
                    usedCard.remove();
                } else {
                    console.log(pastSwipes[i].id)
                }
            }

            // if onboarding is completed but user hasn't started swiping:
            let first = document.getElementById("first");
            if (pastSwipes.length = 0) {
                placeHolderStart = document.getElementById("policy-card");
                document.getElementById("firstElemContent").innerHTML = placeHolderStart.innerHTML;
                first.dataset.link = placeHolderStart.dataset.link;
                first.dataset.category = placeHolderStart.dataset.category;
                placeHolderStart.remove();
            } else {
                // Function to set the last three children to display: block
                var parent = document.getElementById("card-container");

                var totalChildren = parent.children.length;
                var firstChildIndexToChange = totalChildren - 3;
                for (var i = firstChildIndexToChange; i < totalChildren; i++) {
                    parent.children[i].style.display = 'block';
                }
                if (first) {
                    first.style.display = 'none';
                }
            }
            document.getElementById("desktop-main").style.display = "block";
            if (window.innerWidth < 720) {
                document.getElementById("desktop-sidenav").style.display = "flex";
            }
            loadNextVideo();
loadNextVideo();
loadNextVideo();
loadNextVideo();
        }
        document.getElementById("dashboard-body").style.display = "flex";

    // document.getElementById("dashboard-body").style.background = "#f5f5f5";
    // document.getElementById("desktop-main").style.background = "#f5f5f5";
    // document.getElementById("desktop-sidenav").style.backgroundColor = "rgba(255, 255, 255, 0.2)";

    // document.querySelectorAll('.desktop-button').forEach(el => el.style.backgroundColor = 'rgba(255, 255, 255, 0.2)');
    // document.getElementById("nav2").style.backgroundColor = "white";

    // after first swipe, reset styles regardless

let selectedCategories = [];
function toggleClick(elementId)  {
    let clicked = document.getElementById(elementId);
    if (!selectedCategories.includes(elementId)) {
        clicked.style.backgroundColor = 'hsl(234, 44%, 88%)';
        selectedCategories.push(elementId);
    } else {
        clicked.style.backgroundColor = 'white';
        selectedCategories.pop(elementId);
    }
    document.getElementById("onboarding-button").style.backgroundColor = 'rgba(170, 4, 98, 0.7)';
}
function moveOn() {
  if (selectedCategories.length > 0) {

  let parentElement = document.getElementById('card-container');
  for (let i = 0; i < selectedCategories.length; i++) {

        let elementToMove = document.getElementById(selectedCategories[i] + "-card");

    let elementToMove2 = document.getElementById(selectedCategories[i] + "-card-2");
    if (elementToMove) {
      parentElement.appendChild(elementToMove2);    
      if (i === selectedCategories.length - 1) {
        let first = document.getElementById("first");
        document.getElementById("firstElemContent").innerHTML = (elementToMove.innerHTML);
        first.dataset.link = elementToMove.dataset.link;
        first.dataset.category = elementToMove.dataset.category;
        elementToMove.remove();
        parentElement.appendChild(first);
        elementToMove2.style.display = "block"; // may need to display one more hidden card as well
      } else if (selectedCategories.length > 2 && i === selectedCategories.length - 2) {
        parentElement.appendChild(elementToMove);
        elementToMove.style.display = "block";
    } else {
        parentElement.appendChild(elementToMove);
    }
    }
  }
  loadNextVideo();
    loadNextVideo();
    loadNextVideo();
    loadNextVideo();
    if (window.innerWidth < 720) {
        document.getElementById("desktop-sidenav").style.display = "flex";
    }
    document.getElementById("desktop-main").style.display = "block";
    document.getElementById("onboarding-survey").classList.add("fade-out-med");
    setTimeout(function() {
        document.getElementById("onboarding-survey").style.zIndex = "-1";
        document.getElementById("onboarding-survey").style.display = "none";
    }, 1000)
}
}

// picks you up where you left off in the swipe feed
// currently picks up cards by link, which could break if two have the same link, function somewhat inefficient by not breaking
// let foundCard = 0; 
// let lastSession = localStorage.getItem("nextItemLink");
// if (lastSession && lastSession.includes("/")) {
//     const cards = Array.from(document.querySelectorAll('.card')).reverse();
//     cards.forEach((card) => {
//         if (card.dataset.link === lastSession) { 
//             card.style.display = 'block'; 
//             foundCard++;
//         }
//         if (foundCard === 0) {
//             card.remove(); 
//         } else if (foundCard < 4) {
//             card.style.display = 'block'; 
//             foundCard++;
//         } 
//     });
// }

function loadNextVideo() {
    let videos = document.getElementsByTagName('video');
    if (currentVideoIndex < videos.length) {
        const video = videos[videos.length - 1 - currentVideoIndex];
        const source = video.getElementsByTagName('source')[0];

        const srcWebm = source.getAttribute('data-src-webm');
        const srcMp4 = source.getAttribute('data-src-mp4');
        if (srcWebm) {
            if (video.canPlayType('video/webm; codecs="vp8, vorbis"')) {
            source.setAttribute('src', srcWebm);
            source.setAttribute('type', 'video/webm');
            } else {
            source.setAttribute('src', srcMp4);
            source.setAttribute('type', 'video/mp4');
            }
            video.load(); // This is needed to reload the video with the new source
            video.play().catch(e => console.log("Autoplay was prevented", e)); // Auto-play needs user gesture, catch any errors
        }
        
        currentVideoIndex += 1;
    }
}

function nextQuestion(currentQuestion) {
    var questionContainer = document.getElementById('question-' + currentQuestion);
    questionContainer.classList.remove('active');

    var nextQuestionContainer = document.getElementById('question-' + (currentQuestion + 1));
    if (nextQuestionContainer) {
        nextQuestionContainer.classList.add('active');
    } else {
        document.getElementById('completion-message').style.display = 'block';
        saveAnswers();
    }
}
      </script>
    <script>
let searchInput = document.getElementById('search-input');
let resultsContainer = document.getElementById('results-container');

searchInput.addEventListener('keyup', function(e) {
    let searchQuery = e.target.value;

    // Fetch matching pages
    if (searchQuery) {fetch('pages.json')
        .then(response => response.json())
        .then(data => {
            let matches = data.filter(page => {
                // Check if any word in the search query is included in the h1 string
                let h1Match = searchQuery.toLowerCase().split(" ").some(queryWord => 
                page.h1.toLowerCase().includes(queryWord)
            );

            // Check if any word in the search query is included in any of the keywords
            let keywordMatch = searchQuery.toLowerCase().split(" ").some(queryWord => 
                page.keywords.some(keyword => 
                    keyword.toLowerCase().includes(queryWord)
                )
            );

            return h1Match || keywordMatch; // Return true if either match is found
        });

        displayResults(matches);
        });
    } else {
        clearResults();
    }
});

function clearResults() {
    while (resultsContainer.firstChild) {
        resultsContainer.firstChild.remove();
    }
}

function displayResults(matches) {
    // Clear any existing results
    while (resultsContainer.firstChild) {
        resultsContainer.firstChild.remove();
    }

    // Add new results
    matches.forEach(match => {
        let resultOption = document.createElement('div');
        resultOption.textContent = match.h1;
        resultOption.addEventListener('click', function() {
            // This assumes that you have a URL available for each page on a
            // `url` property. You may need to adjust this based on your
            // actual data structure.
            window.location.href = "/doorstops/" + match.name;
        });
        resultsContainer.appendChild(resultOption);
    });
}
    </script>

    <script>
// For each card
let swipedRight = JSON.parse(localStorage.getItem('swipedRight')) || [];  // load swiped right cards from localStorage
let swipedLeft = JSON.parse(localStorage.getItem('swipedLeft')) || [];  // load swiped right cards from localStorage

let deltaSwipe = 100;
let isMobile = 0;
// shortens swipe distance for mobile users --- I should change the threshold though, 
// it's too high, doesn't match css and will be weird on ipads
if (window.innerWidth < 1000) {
    deltaSwipe = 70;
    isMobile = 1;
}

var currentCard = document.getElementById("first");
document.querySelectorAll('.card').forEach((card, index) => {
    let hammertime = new Hammer(card);
    let initialPos = 0;
    let currentPos = 0;
    let rafId = null;

    // Animate the card moving - currently not being called
    function animate() {
        if(currentPos != 0) {
            let transform = `translateX(${currentPos}px)`;
            card.style.transform = transform;
            rafId = requestAnimationFrame(animate);
        }
    }
    // Update position as you pan and animate
    hammertime.on('pan', function(e) {
        if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) { // Only respond to mostly horizontal movements, fixes issues on mobile
            currentPos = initialPos + e.deltaX;
            let transform = `translateX(${currentPos}px)`;
            card.style.transform = transform;
        } else {
        currentPos = 0;
    }
        
    });

    hammertime.on('panstart', function() {
        initialPos = currentPos;
        card.classList.remove('out');
    });

    hammertime.on('panend', function(e) {
        initialPos = currentPos;

        if (Math.abs(e.deltaX) > deltaSwipe) { // Change this threshold as you like
            // If you swipe more than 100px to the right or left, take action
            card.classList.add('out');
            if (e.deltaX > 0) {
                handleSwipeRight(card);
            } else {
                handleSwipeLeft(card);
            }
            showNextCard(card);
        } else {
            // If you don't swipe enough, the card springs back to center
            animate();
            currentPos = 0;
        }
        cancelAnimationFrame(rafId);
        rafId = null;
    });
});
function handleSwipeLeft(card) {
    if (card.dataset.category === "50-swipes-survey-yes") {
                plausible("50-swipes-survey-no");
    } else if (card.dataset.category === "25-swipes-survey-yes") {
        plausible("25-swipes-survey-no");
    }
    swipedLeft.push({
        title: card.querySelector('h2').textContent,
        link: card.dataset.link,
        id: card.id
    });
    localStorage.setItem('swipedLeft', JSON.stringify(swipedLeft));
}

let iframe = document.getElementById("doorstop-frame");
function handleSwipeRight(card) {
    let cardLink = card.dataset.link;
    let cardCategory = card.dataset.category;
    // let cardHeight = card.dataset.height;
    let cardid;
    removeScript("/doorstops/naptime.js")
    if (cardLink) {
        if (cardLink.includes("#")) {
            cardid = cardLink.split('#')[1];
        }
        // if (cardLink === "PERSONALIZED") {
        //     let dinky = document.getElementById('popup');
        //     dinky.style.display = "flex";
        // }
        if (cardLink.startsWith('https://')) {
            // Open external link in the same tab with window.location.href = cardLink;
            // 
            let url = new URL(cardLink);
            console.log(url + " URL")
            iframe.src = url.pathname + url.search;
            document.getElementById("content-placeholder").innerHTML = "";
            document.getElementById("left-section").style.width = "100%";
            iframe.style.height = "400px";
            iframe.onload = function() {
                if (url.pathname === "/school") {
                    iframe.style.height = "862px";
            } else {
                iframe.style.height = (document.getElementById("doorstop-frame").contentWindow.document.body.scrollHeight + 20 ) + "px";
            }
            }
            showSection(3);

        } 
        else {
            document.getElementById("left-section").style.width = "90%";
            iframe.src = "";
            // let bang = document.getElementById("main");
            // bang.src = cardLink;
            // bang.height = cardHeight;
        setTimeout(() => {
            fetch(cardLink)
        .then(response => response.text())
        .then(html => {
            // create a new DOMParser
            let parser = new DOMParser();
            // parse the text to a new document
            let doc = parser.parseFromString(html, 'text/html');
            // select the element with class 'yonk'
            let yonkElement = doc.querySelector(".yonk");

            let aboutElement = doc.querySelector(".about-content");
            let article = doc.querySelector("article");
            let body = doc.querySelector("body");
            let content = document.querySelector("#content-placeholder");
            window.location.hash ="#content-placeholder";
            if (yonkElement) {
                // put the content of 'yonk' element inside the placeholder
                loadStylesheet("/assets/css/style.css");
                content.innerHTML = yonkElement.outerHTML;
                // Remove the first five <br> tags
                let brTags = document.querySelectorAll(".yonk > br");
                for (let i = 0; i < 5 && i < brTags.length; i++) {
                    brTags[i].remove();
                }
                if (doc.querySelector("#dividers-label")) {
                    loadStylesheet("/assets/css/emoji.css");
                    loadStylesheet("/doorstops/poop.css");
                    loadScript("/doorstops/poop.js");
                } else if (doc.querySelector(".sleepbox")){
                    loadStylesheet("/doorstops/naptime.css");
                    loadStylesheet("/assets/css/emoji.css");
                    loadScript("/doorstops/naptime.js");
                } 
                if (cardid) { // scroll to #ID
                    window.location.hash = cardid;
                    // bang.onload = function() {
                    //     bang.contentWindow.document.getElementById(cardid).scrollIntoView();
                    // };                            
                } 
            } else if (article) {
                // loadStylesheet("/assets/css/style.css");
                content.innerHTML = article.outerHTML;
            } else if (aboutElement) {
                // content.innerHTML = "";
                loadStylesheet("/assets/css/style.css");
                content.innerHTML = aboutElement.outerHTML;
            } else if (doc.querySelector(".slider-wrapper")){
                loadStylesheet("/doorstops/food.css");
                // content.innerHTML = "";
                // content.appendChild(body);
                content.innerHTML = body.outerHTML;
                loadScript("/assets/js/food.js");
            } else if (doc.querySelector(".ref")) {
                loadStylesheet("/assets/css/dynamic.css");
                // const bodyElement = body.cloneNode(true);
                content.innerHTML = doc.querySelector(".ref").outerHTML;
                loadScript("/assets/js/ref.js");
                loadScript("/assets/js/ref-dashboard.js");
                setTimeout(() => callthis(), 200);
            }
            else {
                content.innerHTML = body.outerHTML;
                // not sure if I need a stylesheet here.
            }
            if (!cardid) {
                window.location.hash = '#scrollToHere' // causes slight hitch on load
            }
            showSection(3);
            
            
        })
        .catch(err => console.log('Failed to load page: ', err));
                    
        });
    }
        swipedRight.push({
        title: card.querySelector('h2').textContent,
        link: card.dataset.link,
        id: card.id
        });
        localStorage.setItem('swipedRight', JSON.stringify(swipedRight));  // save to localStorage
        document.querySelector('#howto').style.display = 'none'; // hides howto

        plausible(cardCategory);
    }
    else if (card.dataset.category === "50-swipes-survey-yes") {
        plausible("50-swipes-survey-yes");
    } else if (card.dataset.category === "25-swipes-survey-yes") {
        plausible("25-swipes-survey-yes");
    }
}
function showNextCard(card) {
    loadNextVideo();
    let nextCard = card.previousElementSibling;
    let followingCard = nextCard.previousElementSibling;
    if (followingCard) {
        followingCard.style.display = 'block';
    }
    currentCard = nextCard;
    if (nextCard.dataset.link) {
        localStorage.setItem("nextItemLink", nextCard.dataset.link);
    }
    card.style.opacity = '0';
    // After the transition ends, remove the card
    setTimeout(() => {card.style.display = 'none'; }, 100);
}

function loadScript(src) {
    let script = document.createElement('script');
    script.src = src;
    script.async = true;
    document.head.appendChild(script);
}

function removeScript(src) {
    let link = document.querySelector(`link[src='${src}']`);
    if (link) {
        link.parentNode.removeChild(link);
    }
}

function loadStylesheet(url) {
    var link = document.createElement("link");
    link.type = "text/css";
    link.rel = "stylesheet";
    link.href = url;
    document.getElementsByTagName("head")[0].appendChild(link);
} 

function removeStylesheet(href) {
    let link = document.querySelector(`link[href='${href}']`);
    if (link) {
        link.parentNode.removeChild(link);
    }
}
window.addEventListener('message', function(event) {
    if (event.data === 'linkClicked') {
        // Wait a little for content to load and then resize
        iframe.onload = function() {
            iframe.style.height = (iframe.contentWindow.document.body.scrollHeight + 20) + "px";
        }; 
    }
}, false);

// notify streak - BETA FEATURE // TODO: make desktop only. if (isMobile === 0)
// let streak = 0; 
// streak = localStorage.getItem('days');
// var today = new Date();
// if (streak > 0) {
//     var ONE_DAY = 1000 * 60 * 60 * 24; // (localStorage.getItem('date').getTime() + ONE_DAY)
//     if (today.getTime() > 1) {
//         streak++;
//         localStorage.setItem('days', streak);
//         if (streak === 10) {

//         } else if (streak > 10) {

//         } else {
//             document.getElementById("streak-notif").textContent = streak + " Doorstop days in a row!! Stay for 10 for a surprise üèÜüèÜ";
//             setTimeout(() => {
//                 document.getElementById("streak-notif").classList.add('fade-in');
//             }, 500);
//         }

//         setTimeout(() => {
//             document.querySelector('#streak-notif').style.display = "none";
//         }, 2000);
//     } 
// } else {
//     localStorage.setItem('days', 1);
// }
// localStorage.setItem('date', today);


// Add event listeners to navbar icons
document.getElementById('nav1').addEventListener('click', function() { showSection(1); });
document.getElementById('nav2').addEventListener('click', function() { showSection(2); });
document.getElementById('nav3').addEventListener('click', function() { showSection(3); });
document.getElementById('nav4').addEventListener('click', function() { showSection(4); });
document.getElementById('nav5').addEventListener('click', function() { showSection(5); });

document.getElementById('nav1m').addEventListener('click', function() { showSection(1); });
document.getElementById('nav2m').addEventListener('click', function() { showSection(2); });
document.getElementById('nav3m').addEventListener('click', function() { showSection(3); });
document.getElementById('nav4m').addEventListener('click', function() { showSection(4); });
document.getElementById('nav5m').addEventListener('click', function() { showSection(5); });

let lastShownSection = 2; // starting page
iconSrc = ["/assets/svg/Book_check.svg", "/assets/svg/cards-light.svg",  "/assets/svg/Favorite.svg", "/assets/svg/Lamp.svg", "/assets/svg/User_alt.svg"]
mobileNav = ["", "m"] // mobile check done earlier in script
sections = ["#swiped-right-section", "#card-container", "#left-section",  "#bingo-section", "#account-section"]

function showSection(n) {
    if (n === 2) {

        removeStylesheet("/assets/css/style.css");
        // removeStylesheet("/assets/css/dynamic.css"); - keep an array of current sheets, then remove from there
        // remove more sheets - do this no matter what they click on unless they click 3, so 3 should be the default if.
        document.querySelector(sections[lastShownSection - 1]).style.display = 'none';
        // console.log("n = 2, LSS: ", lastShownSection) unaddressed bug here - lastShownSection is 2 when using swipe on left section
        document.querySelector('#card-container').style.display = 'block';
        document.getElementById('img' + lastShownSection + mobileNav[isMobile]).src= iconSrc[lastShownSection - 1];
        document.getElementById('img2' + mobileNav[isMobile]).src = "/assets/svg/cards-dark.svg";
        lastShownSection = 2;
    } else if (n === 1) {
        document.querySelector('#card-container').style.display = 'none';
        document.querySelector('#left-section').style.display = 'none';
        document.querySelector('#bingo-section').style.display = 'none';
        document.querySelector('#account-section').style.display = 'none';

        removeStylesheet("/assets/css/style.css");
        document.querySelector('#swiped-right-section').style.display = 'block';
        document.getElementById('img' + lastShownSection + mobileNav[isMobile]).src = iconSrc[lastShownSection - 1];
        document.getElementById('img1' + mobileNav[isMobile]).src = "/assets/svg/Book_check_fill.svg";
        lastShownSection = 1;

    } else if (n === 3) {
        document.querySelector('#left-section').classList.add("fade-in");
        document.querySelector(sections[lastShownSection - 1]).style.display = 'none';
        
        // onboarding!
        let firstRightSwipeDone = localStorage.getItem("firstRightSwipeDone");
        if (!firstRightSwipeDone) {
            if (isMobile === 1) {
                $('.tooltip').each(function() {
                    var currentHTML = $(this).html();
                    var modifiedHTML = 'üëá' + currentHTML.substring(1);
                    $(this).html(modifiedHTML);
                });
            } 
            setTimeout(() => {
                document.getElementById('doorstop-onboarding').style.display = "block";
                document.getElementById("nav2").classList.add("desktop-button-onboard");
                document.getElementById("nav4").classList.add("desktop-button-onboard");
                document.addEventListener('click', function(event) {
                    removeOnboarding()
                });
                document.addEventListener('keydown', function(event) {
                    removeOnboarding()
                });
            }, 3000);
            localStorage.setItem("firstRightSwipeDone", "true");

        }
        function removeOnboarding() {
            document.getElementById('doorstop-onboarding').style.display = "none";
            document.querySelector('#left-section').style.backgroundColor = "white";
            document.getElementById("nav2").classList.remove("desktop-button-onboard");
            document.getElementById("nav4").classList.remove("desktop-button-onboard");
            // document.getElementsByClassName("triangle-main")[0].style.display = "inline-block";
            // document.getElementsByClassName("triangle-left")[0].style.display = "inline-block";
        }
        document.querySelector('#left-section').style.display = 'block';
        setTimeout(() => {
            document.querySelector('#left-section').classList.remove("fade-in");
        }, 500);
        document.getElementById('img' + lastShownSection + mobileNav[isMobile]).src = iconSrc[lastShownSection - 1];
        document.getElementById('img3' + mobileNav[isMobile]).src = "/assets/svg/Favorite_fill.svg";
        lastShownSection = 3;

    } 
    else if (n === 4) {
        document.querySelector('#bingo-section').classList.add("fade-in");
        document.querySelector(sections[lastShownSection - 1]).style.display = 'none';
 
            fetch("/bingo")
        .then(response => response.text())
        .then(html => {
            // create a new DOMParser
            let parser = new DOMParser();
            // parse the text to a new document
            let doc = parser.parseFromString(html, 'text/html');
            
            let body = doc.querySelector("#bingo");
            document.querySelector("#bingo-action").innerHTML = body.outerHTML;
        });

        document.querySelector('#bingo-section').style.display = 'block';
        document.querySelector("#bingo-section").style.backgroundColor = 'transparent';
        setTimeout(() => {
            document.querySelector('#bingo-section').classList.remove("fade-in");
        }, 500);
        // document.getElementById('img2').src = "/assets/svg/cards-light.svg";
        // document.getElementById('img1').src = "/assets/svg/Book_check.svg";
        // document.getElementById('img3').src = "/assets/svg/Favorite.svg";
        // document.getElementById('img5').src = "/assets/svg/User_alt.svg";
        document.getElementById('img' + lastShownSection  + mobileNav[isMobile]).src = iconSrc[lastShownSection - 1];

        document.getElementById('img4' + mobileNav[isMobile]).src= "/assets/svg/Lamp_fill.svg";
        lastShownSection = 4;

    } else if (n === 5) {
        document.querySelector(sections[lastShownSection - 1]).style.display = 'none';
        document.querySelector('#account-section').style.display = 'block';
        let list = document.querySelector('#swiped-right-list');
        list.innerHTML = '';
        let l = 0;
        swipedRight.forEach(card => {
            let listItem = document.createElement('li');
            let link = document.createElement('a');
            // let button = document.createElement('button');
            link.href = card.link;
            link.textContent = card.title;
            link.target = '_blank';
            listItem.className = 'liked'
            listItem.appendChild(link);
            list.appendChild(listItem);
            // let dropdown = document.createElement('div');
            // if (l === 0) {
            //     fetch('pages.json')
            //     .then(response => response.json())
            //     .then(data => { data.filter(page => {
            //             if (page.name === card.contents) {
            //                 dropdown.textContent = page.html;
            //             }
            //         });
            //     });
            //     l++;
            // }
            // listItem.appendChild(dropdown);
        });
        document.getElementById('img' + lastShownSection + mobileNav[isMobile]).src = iconSrc[lastShownSection - 1];
        // document.getElementById('img1').src = "/assets/svg/Book_check.svg";
        // document.getElementById('img3').src = "/assets/svg/Favorite.svg";
        document.getElementById('img5' + mobileNav[isMobile]).src = "/assets/svg/User_alt_fill.svg";
        // document.getElementById('img4').src= "/assets/svg/Lamp.svg";
        lastShownSection = 5;
    }
}
    </script>
    <script>
function saveAnswers() {
  let mood = Array.from(document.querySelectorAll('input[name="mood"]:checked'), input => input.value);
  let clubsSports = document.querySelector('input[name="clubs-sports"]:checked')?.value || "";
  let minority = document.querySelector('input[name="minority"]:checked')?.value || "";
  let genderIdentity = document.querySelector('input[name="gender-identity"]:checked')?.value || "";

  localStorage.setItem('mood', JSON.stringify(mood));
  localStorage.setItem('clubsSports', clubsSports);
  localStorage.setItem('minority', minority);
  localStorage.setItem('genderIdentity', genderIdentity);
}
    </script>

  <script src="/assets/js/script.js" defer></script>
</body>

</html>
